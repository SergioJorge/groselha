(function(a){function j(b){for(var c in a.jpt.templateTags)if(this.attr("tagName").toLowerCase()==c.toLowerCase()){var d=a.jpt.templateTags[c].call(b,this);this.replaceWith(d)}}function i(a){var b=[];for(var c=0;c<this.attr("attributes").length;c++){if(this[0].attributes[c].nodeName.substr(0,5)=="attr:"){var d=this[0].attributes[c].nodeName,e=d.substr(5,d.length);b.push(e)}}for(var f=0;f<b.length;f++){var d=b[f];try{var g=this.attr("attr:"+d);this.removeAttr("attr:"+d);var h=new String(a.getElement(g));this.attr(d,h)}catch(i){console.log("Error in fill atribute "+d+" with "+h)}}}function h(b){var c=this.attr("repeat");if(c!=undefined){var d=this,e=c.split(/\s+/),f=e[0],c=e[1];var g=b.getElement(c)||[],h=0,i=1;d.removeAttr("repeat");a(g).each(function(a,c){b.repeat={index:h,number:i,even:!!(h%2),odd:!!(i%2),start:h===0?true:false,end:i==g.length?true:false};var e=d.clone();b[f]=c;var j=e.jptRender(b);j.insertBefore(d);h++;i++});this.remove()}}function g(a){var b=this.attr("replace");this.removeAttr("replace");if(b!=undefined){var c=a.getElement(b);this.replaceWith(c)}}function f(a){var b=this.attr("content");this.removeAttr("content");if(b!=undefined){var c=a.getElement(b);typeof c=="object"?this.html(c):this.text(c)}}function e(a){var b=this.attr("condition");this.removeAttr("condition");if(b!=undefined){var c=a.getElement(b);if(!c)this.remove()}}function d(a,b){return a.replace(/{{([\.\w]+)}}/g,function(a,c){return b.getElement(c)})}function c(c){if(c.slice(0,7)=="string:"){return d(c.slice(7),this)}acessors=c.split("|");result=undefined;for(var e=0;e<acessors.length;e++){c=acessors[e];content=b(this,c.split("."));result=content&&a.isFunction(content)?content(result):content}return result}function b(c,d){var e=d[0];var f;if(c.hasOwnProperty(e)){f=c[e]}else if(a.jpt.filters.hasOwnProperty(e)){f=a.jpt.filters[e]}else if(window.hasOwnProperty(e)){f=window[e]}else{console.log("Undefined "+e+" in "+JSON.stringify(f))}if(d.length>1){var g=d.splice(1,d.length);return b(f,g)}else{return f}}a.jpt={};a.jpt.filters={toHtml:a};a.jpt.extendFilter=function(b){a.extend(a.jpt.filters,b)};a.jpt.templateTags={};a.jpt.extendTemplateTags=function(b){a.extend(a.jpt.templateTags,b)};a.fn.jptRender=function(a){a.getElement=c;var b=this.clone();b.renderInline(a);return b};a.fn.renderInline=function(a){a.getElement=c;var b=this.attr("repeat");if(b!=undefined){h.call(this,a)}else{var d=this.contents("*");for(var k=0;k<d.length;k++)d.eq(k).renderInline(a)}e.call(this,a);f.call(this,a);g.call(this,a);i.call(this,a);j.call(this,a)}})(jQuery)